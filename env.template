# =============================================================================
# RES PROPERTY MANAGEMENT SYSTEM - ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all environment variables required for the system to function.
# 
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env.local: cp env.template .env.local
# 2. Replace all placeholder values with your actual credentials
# 3. Never commit .env.local to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION (REQUIRED)
# -----------------------------------------------------------------------------
# Get these from your Supabase project dashboard:
# https://app.supabase.com/project/[your-project]/settings/api
# 
# NEXT_PUBLIC_SUPABASE_URL: Your Supabase project URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY: Your Supabase anonymous/public key (safe for client-side)
# SUPABASE_SERVICE_ROLE_KEY: Your Supabase service role key (SERVER-SIDE ONLY, never expose!)

NEXT_PUBLIC_SUPABASE_URL=https://[your-project].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1QiLCJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJ0eXAiOiJKV1QiLCJhbGc...

# -----------------------------------------------------------------------------
# APPLICATION CONFIGURATION (REQUIRED)
# -----------------------------------------------------------------------------
# Base URL of your application (used for callbacks, email links, redirects)
# 
# Development: http://localhost:3000
# Production: https://yourdomain.com
# 
# NOTE: The codebase uses NEXT_PUBLIC_SITE_URL (not NEXT_PUBLIC_APP_URL)

NEXT_PUBLIC_SITE_URL=http://localhost:3000
NODE_ENV=development

# -----------------------------------------------------------------------------
# M-PESA DARAJA API CONFIGURATION (REQUIRED FOR PAYMENTS)
# -----------------------------------------------------------------------------
# Get these from Safaricom Daraja Developer Portal:
# https://developer.safaricom.co.ke/
# 
# Sandbox credentials are available immediately after registration
# Production credentials require Safaricom approval

# Basic M-Pesa Configuration (REQUIRED)
MPESA_CONSUMER_KEY=your_consumer_key
MPESA_CONSUMER_SECRET=your_consumer_secret
MPESA_SHORTCODE=174379
MPESA_PASSKEY=your_passkey
MPESA_CALLBACK_URL=https://yourdomain.com/api/payments/mpesa/callback
MPESA_ENVIRONMENT=sandbox

# M-Pesa Auto-Verification Configuration (OPTIONAL - but recommended)
# Used for automatic payment verification via scheduled cron tasks
# 
# MPESA_INITIATOR_NAME: Sandbox uses "testapi", Production uses your initiator name
# MPESA_SECURITY_CREDENTIAL: Only needed for production (RSA encrypted)
# MPESA_MAX_RETRIES: Maximum retry attempts for failed verifications (default: 3)
# MPESA_AUTO_VERIFY_ENABLED: Enable/disable auto-verification (default: true)

MPESA_INITIATOR_NAME=testapi
MPESA_SECURITY_CREDENTIAL=
MPESA_MAX_RETRIES=3
MPESA_AUTO_VERIFY_ENABLED=true

# -----------------------------------------------------------------------------
# AFRICA'S TALKING SMS CONFIGURATION (REQUIRED FOR SMS)
# -----------------------------------------------------------------------------
# Get these from Africa's Talking Developer Portal:
# https://account.africastalking.com/
# 
# Create an account and get your API credentials
# Sender ID is optional for sandbox, required for production

AFRICAS_TALKING_API_KEY=your_api_key
AFRICAS_TALKING_USERNAME=your_username
AFRICAS_TALKING_SENDER_ID=RES
AFRICAS_TALKING_ENVIRONMENT=sandbox

# -----------------------------------------------------------------------------
# CRON JOB SECURITY (REQUIRED FOR SCHEDULED TASKS)
# -----------------------------------------------------------------------------
# Secret key to protect cron endpoints from unauthorized access
# 
# Used by:
# - /api/cron/mpesa-auto-verify (M-Pesa auto-verification)
# - /api/cron/invoices-monthly (Monthly invoice generation)
# 
# Generate a strong random string:
# - Linux/Mac: openssl rand -hex 32
# - Or use: https://randomkeygen.com/
# 
# Minimum recommended length: 32 characters

CRON_SECRET=your_cron_secret_key_here

# -----------------------------------------------------------------------------
# SYSTEM CONFIGURATION (OPTIONAL)
# -----------------------------------------------------------------------------
# System user ID for automated operations
# 
# Only needed if you want to track system operations (invoices, reminders, etc.)
# with a specific user ID. If not set, defaults to a system UUID.
# 
# Uncomment and set if needed:
# SYSTEM_USER_ID=00000000-0000-0000-0000-000000000000

# =============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#
# [ ] NEXT_PUBLIC_SITE_URL updated to production domain (HTTPS)
# [ ] NODE_ENV=production
# [ ] MPESA_ENVIRONMENT=production
# [ ] MPESA_SHORTCODE updated to production shortcode
# [ ] MPESA_SECURITY_CREDENTIAL set (RSA encrypted for production)
# [ ] MPESA_CALLBACK_URL updated to production URL (HTTPS)
# [ ] MPESA_INITIATOR_NAME updated to production initiator name
# [ ] AFRICAS_TALKING_ENVIRONMENT=production
# [ ] AFRICAS_TALKING_SENDER_ID set (required for production)
# [ ] CRON_SECRET is strong and unique (32+ characters)
# [ ] All URLs use HTTPS
# [ ] SUPABASE_SERVICE_ROLE_KEY is secure (never exposed client-side)
# [ ] .env.local is in .gitignore
#
# =============================================================================
# VARIABLE USAGE SUMMARY
# =============================================================================
#
# REQUIRED VARIABLES (System won't work without these):
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY
# - SUPABASE_SERVICE_ROLE_KEY
# - NEXT_PUBLIC_SITE_URL
# - MPESA_CONSUMER_KEY
# - MPESA_CONSUMER_SECRET
# - MPESA_PASSKEY
# - AFRICAS_TALKING_API_KEY
# - AFRICAS_TALKING_USERNAME
# - CRON_SECRET
#
# OPTIONAL VARIABLES (Have defaults or are feature-specific):
# - NODE_ENV (defaults to development)
# - MPESA_SHORTCODE (defaults to 174379)
# - MPESA_CALLBACK_URL (defaults to NEXT_PUBLIC_SITE_URL + /api/payments/mpesa/callback)
# - MPESA_ENVIRONMENT (defaults to sandbox)
# - MPESA_INITIATOR_NAME (defaults to testapi)
# - MPESA_SECURITY_CREDENTIAL (only for production)
# - MPESA_MAX_RETRIES (defaults to 3)
# - MPESA_AUTO_VERIFY_ENABLED (defaults to true)
# - AFRICAS_TALKING_SENDER_ID (optional for sandbox)
# - AFRICAS_TALKING_ENVIRONMENT (defaults to sandbox)
# - SYSTEM_USER_ID (has default UUID)
#
# =============================================================================
